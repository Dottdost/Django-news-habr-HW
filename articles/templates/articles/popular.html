{% extends 'articles/layout.html' %}
{% block title %}Top Rated Articles{% endblock %}
{% block content %}
<h2 class="mb-4"><i class="bi bi-stars"></i> Top Rated Articles</h2>

{% for article in articles %}
<div class="card mb-3 shadow-sm">
  <div class="card-body d-flex align-items-center justify-content-between">
    <div>
      <h5 class="mb-1">
        <a href="{% url 'article_detail' article.pk %}" class="text-dark text-decoration-none">
          {{ article.title }}
        </a>
      </h5>
      <p class="text-muted mb-0">

        {% if article.avg_rating %}
          <span class="me-2">{{ article.avg_rating|floatformat:1 }}</span>
          {% for i in "12345" %}
            {% if forloop.counter <= article.avg_rating %}
              <i class="bi bi-star-fill"></i>
            {% else %}
              <i class="bi bi-star"></i>
            {% endif %}
          {% endfor %}
        {% else %}
          <span class="me-2">No rating yet</span>
        {% endif %}

      </p>
    </div>

    <div class="ms-3 text-center">
      <div style="
        width:40px; height:40px;
        border-radius:50%;
        background:#6f42c1;
        color:white;
        display:flex;
        align-items:center;
        justify-content:center;
        font-weight:600;
        ">
        {{ article.author.username|first|upper }}
      </div>
      <small class="text-muted d-block mt-1">{{ article.author.username }}</small>
    </div>

  </div>
</div>
{% empty %}
<p>There are no rated articles yet.</p>
{% endfor %}
{% endblock %}
