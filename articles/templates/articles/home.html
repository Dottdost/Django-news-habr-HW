{% extends 'articles/layout.html' %}
{% block title %}All Articles{% endblock %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="mb-0" style="color: var(--main-dark);">
    <i class="bi bi-newspaper"></i> Latest Articles
  </h2>
  <span class="badge bg-main text-white fs-6">{{ articles.count }} articles</span>
</div>

{% for article in articles %}
<div class="card mb-4 shadow-sm border-0 article-card">
  <div class="row g-0">
    <!-- Image Column -->
    <div class="col-md-3">
      <div class="article-list-image-container">
        <img src="{{ article.image.url }}" class="article-list-image" alt="{{ article.title }}">
        <div class="image-overlay"></div>
      </div>
    </div>

    <!-- Content Column -->
    <div class="col-md-9">
      <div class="card-body d-flex flex-column h-100">
        <!-- Title -->
        <h5 class="card-title mb-2">
          <a href="{% url 'article_detail' article.pk %}"
             class="article-title-link">
            {{ article.title }}
          </a>
        </h5>

        <!-- Meta Info -->
        <div class="article-meta mb-2">
          <span class="meta-item">
            <i class="bi bi-person-circle"></i>
            {{ article.author.username }}
          </span>
          <span class="meta-divider">•</span>
          <span class="meta-item">
            <i class="bi bi-tags"></i>
            {{ article.category }}
          </span>
          <span class="meta-divider">•</span>
          <span class="meta-item">
            <i class="bi bi-star-fill"></i>
            {{ article.avg_rating|default:"No ratings" }}
          </span>
        </div>

        <!-- Stats -->
        <div class="article-stats mb-3">
          <span class="stat-item text-success">
            <i class="bi bi-hand-thumbs-up"></i>
            {{ article.likes }}
          </span>
          <span class="stat-item text-danger">
            <i class="bi bi-hand-thumbs-down"></i>
            {{ article.dislikes }}
          </span>
          <span class="stat-item text-warning">
            <i class="bi bi-chat"></i>
            {{ article.comments_count }}
          </span>
        </div>

        <!-- Date and Read More -->
        <div class="mt-auto d-flex justify-content-between align-items-center">
          <span class="text-muted small">
            <i class="bi bi-clock"></i>
            {{ article.created_at|date:"M d, Y" }}
          </span>
          <a href="{% url 'article_detail' article.pk %}" class="btn btn-sm btn-outline-main">
            Read More <i class="bi bi-arrow-right"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
{% empty %}
<div class="text-center py-5">
  <i class="bi bi-inbox display-1 text-muted"></i>
  <h4 class="mt-3 text-muted">No articles yet</h4>
  <p class="text-muted">Be the first to publish an article!</p>
</div>
{% endfor %}

<style>
.article-card {
  border-left: 4px solid var(--main);
  transition: all 0.3s ease;
  border-radius: 12px;
  overflow: hidden;
}

.article-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
  border-left-color: var(--main-dark);
}

.article-list-image-container {
  position: relative;
  height: 100%;
  min-height: 180px;
  overflow: hidden;
  background: #f8f9fa;
}

.article-list-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  transition: transform 0.3s ease;
}

.article-card:hover .article-list-image {
  transform: scale(1.05);
}

.image-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(45deg, rgba(0,0,0,0.1), transparent);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.article-card:hover .image-overlay {
  opacity: 1;
}

.article-title-link {
  color: var(--main-dark);
  text-decoration: none;
  font-weight: 600;
  transition: color 0.3s ease;
}

.article-title-link:hover {
  color: var(--main);
}

.article-meta {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 8px;
}

.meta-item {
  font-size: 0.85rem;
  color: #6c757d;
  display: flex;
  align-items: center;
  gap: 4px;
}

.meta-divider {
  color: #dee2e6;
  font-size: 0.9rem;
}

.article-stats {
  display: flex;
  gap: 15px;
}

.stat-item {
  font-size: 0.8rem;
  display: flex;
  align-items: center;
  gap: 3px;
}

.btn-outline-main {
  border-color: var(--main);
  color: var(--main);
  font-weight: 500;
  transition: all 0.3s ease;
}

.btn-outline-main:hover {
  background-color: var(--main);
  border-color: var(--main);
  color: white;
}

</style>

{% endblock %}